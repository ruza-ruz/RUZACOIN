<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>RUZA Token ‚Äî Mobile</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />

  <style>
    :root{
      --accent:#00ffff;
      --muted:#bfefff;
      --card:rgba(255,255,255,0.04);
      --action:#009dff;
      --yellow:#ffcc00;
    }

    html,body{
      margin:0;padding:0;
      background:linear-gradient(180deg,#020010 0%,#0a0433 70%,#000 100%);
      color:#fff;
      font-family:"Poppins",Arial,sans-serif;
      text-align:center;
    }

    .container{
      max-width:480px;
      margin:0 auto;
      padding:14px;
      box-sizing:border-box;
    }

    header img{width:100px;display:block;margin:0 auto}
    h1{margin:8px 0;font-size:1.45rem}
    .slogan{font-size:0.9rem;color:#ccc}
    .tagline{font-size:0.95rem;color:var(--yellow);margin-bottom:10px}

    /* ===== LIVE PRICE ===== */
    .live-row{
      display:flex;gap:10px;
      align-items:center;justify-content:center;
      flex-wrap:wrap;margin:10px 0;
    }

    .price-card{
      background:var(--card);
      padding:8px 14px;
      border-radius:12px;
      font-weight:600;
      color:var(--muted);
      min-width:90px;
    }

    .price-spot{
      font-size:1.05rem;
      color:#fff;
      font-weight:700;
    }

    .small{font-size:0.88rem;color:#ccc}

    /* ===== CARD SECTIONS ===== */
    .section-box{
      background:var(--card);
      border-radius:12px;
      padding:14px;
      margin:12px 0;
      box-shadow:0 0 8px rgba(0,0,0,0.25);
    }

    input{
      width:100%;
      padding:10px;
      margin:8px 0;
      border-radius:8px;
      border:none;
      background:rgba(255,255,255,0.08);
      color:#fff;
      text-align:center;
    }

    button{
      background:var(--action);
      color:#fff;
      padding:10px;
      border-radius:8px;
      border:none;
      font-weight:600;
      cursor:pointer;
      width:100%;
    }

    /* Pancake button resize */
    .pancake a{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:var(--yellow);
      color:#111;
      padding:10px 16px;
      border-radius:10px;
      text-decoration:none;
      font-weight:700;
      font-size:0.95rem;
    }

    .pancake img{
      width:22px; /* ⁄©Ÿà⁄Ü⁄©‚Äåÿ™ÿ± Ÿà ÿ≠ÿ±ŸÅŸá‚Äåÿß€å */
      height:22px;
    }

    iframe{
      width:100%;
      height:340px;
      border-radius:10px;
      border:none;
    }

    /* PDF icon resize */
    .whitepaper img{
      width:22px; /* ⁄©Ÿà⁄Ü⁄©‚Äåÿ™ÿ± */
      height:22px;
    }

    .whitepaper a{
      display:inline-flex;
      align-items:center;
      gap:8px;
      color:#ff5555;
      font-weight:700;
      text-decoration:none;
      font-size:0.95rem;
    }

    footer{
      background:#10162d;
      padding:16px;
      margin-top:20px;
      border-top:1px solid rgba(255,255,255,0.06)
    }

    footer .links{
      display:flex;
      justify-content:center;
      gap:16px;
      flex-wrap:wrap;
    }

    footer a{
      display:flex;align-items:center;
      gap:8px;
      color:#33cfff;
      text-decoration:none;
      font-weight:600;
    }

    footer img{
      width:20px;height:20px;object-fit:contain
    }
  </style>
</head>
<body>
  <div class="container">

    <header>
      <img src="assets/logo.png" alt="RUZA Logo" />
      <h1>RUZA Token</h1>
      <div class="slogan">The Future of Space Tourism Economy ‚Äî Powered by Blockchain</div>
      <div class="tagline">Innovating for the next era of space exploration.</div>

      <!-- LIVE PRICE -->
      <div class="live-row">
        <div class="price-card" id="pairInfo">RUZA (RUZ)</div>
        <div class="price-card price-spot" id="livePrice">Loading...</div>
        <div class="price-card small" id="priceChange">24h: ‚Äî</div>
      </div>

      <!-- source link -->
      <div style="margin-top:6px;">
        <a href="https://dexscreener.com/bsc/0x2ec86e1b869cb251fe9441f02c01761543e6cbbd"
           target="_blank"
           style="color:#00ffff;font-size:0.85rem;text-decoration:none;">
           View live chart on DexScreener
        </a>
      </div>
    </header>

    <h2 style="color:var(--accent);font-size:1.2rem;margin:6px 0">
      1,000,000 RUZA Tokens Will Be Distributed for Free!
    </h2>

    <p class="small" id="claim-stats">Loading...</p>

    <section class="section-box">
      <h3 style="margin:0 0 8px 0">üéÅ Claim 100 RUZ ‚Äî One Time per Wallet</h3>

      <input id="claim-address" placeholder="Your BNB Smart Chain Wallet (0x...)" />
      <input id="claim-ref" placeholder="Referral Address (Optional)" />
      <input id="claim-contact" placeholder="Email or Telegram (Optional)" />

      <button id="claim-btn">Submit Claim</button>
      <button id="copy-ref-link" style="margin-top:8px;background:#444">Copy My Referral Link</button>

      <p id="claim-msg" class="small" style="margin-top:8px;color:var(--muted)"></p>

      <p class="small" style="margin-top:8px;color:#ccc">
        Each address can claim only once. Token transfers will be processed by the RUZA team.
      </p>
      <p class="small" style="margin-top:6px;color:var(--muted)">
        Receive a <strong>25 RUZ bonus</strong> for every referred participant!
      </p>
    </section>

    <div class="pancake" style="margin:10px 0;">
      <a href="https://pancakeswap.finance/swap?outputCurrency=0x2ec86e1b869cb251fe9441f02c01761543e6cbbd"
         target="_blank" rel="noopener">
        <img src="assets/pancake.png" alt="Pancake" />
        Trade RUZA (RUZ) on PancakeSwap
      </a>
    </div>

    <section class="section-box">
      <h3 style="margin:0 0 8px 0">üìä Live Chart</h3>
      <iframe src="https://dexscreener.com/bsc/0x2ec86e1b869cb251fe9441f02c01761543e6cbbd?embed=1&theme=light"
              title="RUZA chart"></iframe>
    </section>

    <section class="section-box">
      <h3 style="margin:0 0 8px 0">üöÄ RUZA Future Vision</h3>
      <p class="small" style="color:#ddd;line-height:1.5">
        RUZA Token is dedicated to driving innovation in the blockchain-powered space tourism industry.
      </p>
    </section>

    <section class="section-box whitepaper" style="margin-top:8px">
      <a href="assets/whitepaper.pdf" target="_blank" rel="noopener">
        <img src="https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg" alt="PDF" />
        Download RUZA Whitepaper
      </a>
    </section>

    <footer>
      <p class="small">Join our community:</p>

      <div class="links">
        <a href="https://t.me/RUZAOFFICIAL" target="_blank">
          <img src="assets/telegram.png" alt=""> t.me/RUZAOFFICIAL
        </a>

        <a href="https://instagram.com/RUZA_TOKEN" target="_blank">
          <img src="assets/instagram.png" alt=""> @RUZA_TOKEN
        </a>
      </div>
    </footer>
  </div>

<!-- =====================
     JAVASCRIPT SECTION
======================= -->
<script>
  const apiBase = "https://a81912a7-42f3-4326-83a4-1182d241dad7-00-wmx91wfir4d7.janeway.replit.dev";
  const dexTokenUrl = "https://api.dexscreener.com/latest/dex/tokens/0x2ec86e1b869cb251fe9441f02c01761543e6cbbd";

  function isValidAddr(a){ return /^0x[a-fA-F0-9]{40}$/.test(a?.trim()); }

  /* ---- STATS ---- */
  async function loadStats(){
    const el = document.getElementById("claim-stats");
    try{
      const r = await fetch(apiBase + "/api/stats");
      const j = await r.json();
      el.innerHTML = `<strong style="color:#fff">${j.totalClaimed}</strong> out of <strong>1,000,000</strong> tokens claimed.`;
    }catch(e){
      el.textContent = "Unable to load statistics.";
    }
  }
  loadStats();

  /* ---- PRICE (exact Dex format) ---- */
  async function loadPrice(){
    const priceEl = document.getElementById("livePrice");
    const changeEl = document.getElementById("priceChange");
    const pairEl = document.getElementById("pairInfo");

    try{
      const res = await fetch(dexTokenUrl);
      const data = await res.json();

      if(!data?.pairs?.length){
        priceEl.textContent = "Price unavailable";
        return;
      }

      const p = data.pairs[0];

      /* price EXACTLY like DexScreener */
      const priceRaw = p.priceUsd || p.price || "0";
      const formattedPrice = Number(priceRaw).toString(); // ÿ≠ÿ∞ŸÅ ÿµŸÅÿ±Ÿáÿß€å ÿßÿ∂ÿßŸÅ€å

      priceEl.textContent = "$" + formattedPrice;

      /* 24h change */
      const ch = p.priceChange?.h24 || 0;
      changeEl.textContent = `24h: ${ch}%`;

      pairEl.textContent = `${p.baseToken?.symbol || "RUZ"} ‚Äî ${p.dex?.name || "BSC"}`;

    }catch(e){
      priceEl.textContent = "Price unavailable";
    }
  }

  loadPrice();
  setInterval(loadPrice, 30000);

  /* ---- APPLY REF ---- */
  (()=>{  
    const params = new URLSearchParams(window.location.search);
    const ref = params.get("ref");
    if(isValidAddr(ref)) document.getElementById("claim-ref").value = ref;
  })();

  /* ---- CLAIM ---- */
  document.getElementById("claim-btn").addEventListener("click", async ()=>{
    const msg = document.getElementById("claim-msg");
    msg.textContent = "Submitting...";

    const address = document.getElementById("claim-address").value.trim();
    let ref = document.getElementById("claim-ref").value.trim();
    const contact = document.getElementById("claim-contact").value.trim();

    if(!isValidAddr(address)){
      msg.style.color = "#ff9999";
      msg.textContent = "Invalid wallet address.";
      return;
    }

    if(!isValidAddr(ref) || ref.toLowerCase() === address.toLowerCase()) ref = null;

    try{
      const res = await fetch(apiBase + "/api/claim", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({ address, referrer: ref, contact: contact || null })
      });

      const data = await res.json();

      if(res.ok){
        msg.style.color = "#bfffbf";
        msg.textContent = "Claim submitted!";
        loadStats();
      } else {
        msg.style.color = "#ff9999";
        msg.textContent = data.error || "Submission failed.";
      }

    }catch(e){
      msg.style.color = "#ff9999";
      msg.textContent = "Server connection error.";
    }
  });

  /* ---- COPY REF LINK ---- */
  document.getElementById("copy-ref-link").addEventListener("click", ()=>{
    const addr = document.getElementById("claim-address").value.trim();
    if(!isValidAddr(addr)) return alert("Enter your wallet address first.");

    const link = window.location.origin + window.location.pathname + "?ref=" + addr;
    
    navigator.clipboard.writeText(link).then(()=>{
      const msg = document.getElementById("claim-msg");
      msg.style.color = "#bfefff";
      msg.textContent = "Referral link copied!";
    });
  });
</script>

</body>
</html>
