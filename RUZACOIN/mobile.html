<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>RUZA Token ‚Äî Mobile</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />
  <style>
    html, body { max-width: 100%; overflow-x: hidden; margin: 0; padding: 0; }
    body {
      font-family: "Poppins", Arial, sans-serif;
      color: #fff;
      text-align: center;
      background: linear-gradient(180deg, #020010 0%, #0a0433 70%, #000 100%);
    }
    .container { max-width: 480px; margin: 0 auto; padding: 0 12px; box-sizing: border-box; }
    header { padding: 20px 8px; position: relative; z-index: 2; }
    header img { width: 100px; display: block; margin: 0 auto; }
    h1 { margin: 8px 0; font-size: 1.4rem; }
    .slogan { font-size: 0.85rem; color: #ccc; margin-bottom: 6px; }
    .tagline { font-size: 0.9rem; color: #ffd966; font-style: italic; margin-bottom: 8px; }

    .price-banner {
      display:flex; align-items:center; justify-content:space-between;
      gap:10px; background: rgba(0,0,0,0.45); padding:10px 12px; border-radius:10px;
      margin: 8px 0; color:#fff;
    }
    .price-left { text-align:left; }
    .price-value { font-weight:700; font-size:1.2rem; }
    .price-change.price-up { color:#7efc6b; }
    .price-change.price-down { color:#ff6b6b; }

    .section-box {
      background: rgba(255,255,255,0.05); border-radius: 12px; padding: 16px; margin: 12px auto; width: 100%;
      box-shadow: 0 0 10px rgba(255,255,255,0.06); box-sizing: border-box;
    }
    input { width: 100%; padding: 10px; margin: 6px 0; border-radius: 8px; border: none; font-size: 1rem; box-sizing: border-box; }
    button { background: #009dff; color: white; border: none; padding: 10px 12px; font-size: 1rem; border-radius: 8px; cursor: pointer; width: 100%; max-width: 280px; }
    button:hover { background:#0078cc; }
    .pancake a { display:inline-flex; align-items:center; gap:8px; background:#ffcc00; color:#111; padding:10px 12px; border-radius:10px; text-decoration:none; font-weight:600; }
    iframe { width:100%; height:320px; border:none; border-radius:10px; }

    footer { background: #10162d; padding: 20px; margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.06); }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img src="assets/logo.png" alt="RUZA Logo" />
      <h1>RUZA Token</h1>
      <div class="slogan">The Future of Space Tourism Economy ‚Äî Powered by Blockchain</div>
      <div class="tagline">Innovating for the next era of space exploration.</div>
    </header>

    <!-- PRICE BANNER (MOBILE) -->
    <div class="price-banner" id="priceBanner">
      <div class="price-left">
        <div style="font-weight:700">RUZA (RUZ)</div>
        <div style="font-size:12px;color:#cfdcdc">Live price (BSC pair)</div>
      </div>
      <div style="text-align:right">
        <div class="price-value" id="priceValue">‚Äî</div>
        <div id="priceChange" class="price-change">Loading...</div>
      </div>
    </div>

    <h2 class="highlight-title" style="margin-top:6px;font-size:1.1rem;color:#00ffff;">1,000,000 RUZA Tokens Will Be Distributed for Free!</h2>
    <p class="distribution-info" id="claim-stats">Loading...</p>

    <section class="section-box claim-section">
      <h3 style="margin:4px 0 8px 0;">üéÅ Claim 100 RUZ ‚Äî One Time per Wallet</h3>
      <input id="claim-address" type="text" placeholder="Your BNB Smart Chain Wallet (0x...)" />
      <input id="claim-ref" type="text" placeholder="Referral Address (Optional)" />
      <input id="claim-contact" type="text" placeholder="Email or Telegram (Optional)" />
      <button id="claim-btn">Submit Claim</button>
      <button id="copy-ref-link" style="margin-top:8px;background:#444;">Copy My Referral Link</button>
      <p id="claim-msg" style="color:#bfefff;margin-top:12px;font-size:0.9rem;"></p>
      <p style="font-size:0.85rem;color:#ccc;margin-top:8px;">Each address can claim only once. Token transfers will be processed by the RUZA team.</p>
      <p style="font-size:0.9rem;color:#bfefff;margin-top:8px;">Receive a <strong>25 RUZ bonus</strong> for every referred participant!</p>
    </section>

    <div style="margin:8px 0;text-align:center" class="pancake">
      <a href="https://pancakeswap.finance/swap?outputCurrency=0x2ec86e1b869cb251fe9441f02c01761543e6cbbd" target="_blank">
        <img src="assets/pancake.png" alt="PancakeSwap" style="width:20px;height:20px;margin-right:8px" /> Trade RUZA on PancakeSwap
      </a>
    </div>

    <section class="section-box chart" style="padding:12px;">
      <h3 style="margin:6px 0">üìä Live Chart</h3>
      <iframe src="https://dexscreener.com/bsc/0x2ec86e1b869cb251fe9441f02c01761543e6cbbd?embed=1&theme=light"></iframe>
    </section>

    <section class="section-box vision">
      <h3 style="color:#ffcc00;margin-bottom:8px">üöÄ RUZA Future Vision</h3>
      <p style="color:#ddd;font-size:0.95rem;line-height:1.5">RUZA Token is dedicated to driving innovation in the blockchain-powered space tourism industry. Our mission is to connect future travelers, investors, and developers in a decentralized space economy.</p>
    </section>

    <section class="section-box whitepaper" style="padding:12px;">
      <a href="assets/whitepaper.pdf" target="_blank" style="align-items:center;display:inline-flex;gap:8px;">
        <img src="https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg" alt="PDF" style="width:18px;height:18px" /> Download RUZA Whitepaper
      </a>
    </section>

    <footer>
      <p style="margin:0 0 6px 0">Join our community:</p>
      <p style="margin:0">
        <a href="https://t.me/RUZAOFFICIAL" target="_blank"><img src="assets/telegram.png" alt="Telegram" style="width:18px;height:18px;vertical-align:middle;margin-right:6px" /> t.me/RUZAOFFICIAL</a>
        &nbsp;|&nbsp;
        <a href="https://instagram.com/RUZA_TOKEN" target="_blank"><img src="assets/instagram.png" alt="Instagram" style="width:18px;height:18px;vertical-align:middle;margin-right:6px" /> @RUZA_TOKEN</a>
      </p>
    </footer>
  </div>

  <script>
    const apiBase = "https://a81912a7-42f3-4326-83a4-1182d241dad7-00-wmx91wfir4d7.janeway.replit.dev";
    const tokenContract = "0x2ec86e1b869cb251fe9441f02c01761543e6cbbd";

    function isValidAddr(a) { return typeof a === "string" && /^0x[a-fA-F0-9]{40}$/.test(a.trim()); }

    // stats
    async function loadStats() {
      const el = document.getElementById("claim-stats");
      try {
        const r = await fetch(apiBase + "/api/stats?cb=" + Date.now(), { mode: "cors" });
        const j = await r.json();
        if (r.ok && j.totalClaimed !== undefined) {
          el.innerHTML = `<strong>${j.totalClaimed}</strong> out of <strong>1,000,000</strong> RUZA tokens have been distributed so far.`;
        } else {
          el.textContent = "Unable to load statistics.";
        }
      } catch (e) {
        el.textContent = "Unable to load statistics.";
      }
    }
    loadStats();

    // price (dexpr)
    async function loadPrice() {
      const priceEl = document.getElementById("priceValue");
      const changeEl = document.getElementById("priceChange");
      try {
        const r = await fetch(`https://api.dexscreener.com/latest/dex/tokens/${tokenContract}`, { cache: "no-store" });
        const j = await r.json();
        const pairs = j?.pairs || [];
        const bscPair = pairs.find(p => (p.dexId && p.dexId.toLowerCase().includes("pancakeswap")) || p.chainId === "bsc") || pairs[0];
        if (!bscPair) throw new Error("No pair");
        const price = parseFloat(bscPair.priceUsd || bscPair.price).toFixed(6);
        const change = parseFloat(bscPair.priceChange?.replace("%","")) || parseFloat(bscPair.priceChange24h) || 0;
        priceEl.textContent = `$ ${price}`;
        if (change >= 0) {
          changeEl.textContent = `+${change.toFixed(2)}% (24h)`; changeEl.className = "price-change price-up";
        } else {
          changeEl.textContent = `${change.toFixed(2)}% (24h)`; changeEl.className = "price-change price-down";
        }
      } catch (err) {
        priceEl.textContent = "Price unavailable"; changeEl.textContent = "";
      }
    }
    loadPrice();
    setInterval(loadPrice, 30000);

    // referral auto-fill
    const urlRef = new URLSearchParams(window.location.search).get("ref");
    if (isValidAddr(urlRef)) document.getElementById("claim-ref").value = urlRef;

    // claim
    const msg = document.getElementById("claim-msg");
    document.getElementById("claim-btn").onclick = async () => {
      msg.style.color = "#bfefff"; msg.textContent = "Submitting...";
      const address = document.getElementById("claim-address").value.trim();
      let ref = document.getElementById("claim-ref").value.trim();
      const contact = document.getElementById("claim-contact").value.trim();
      if (!isValidAddr(address)) { msg.style.color = "#ff9999"; msg.textContent = "Invalid wallet address."; return; }
      if (!isValidAddr(ref) || ref.toLowerCase() === address.toLowerCase()) ref = null;
      try {
        const res = await fetch(apiBase + "/api/claim", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ address, referrer: ref, contact: contact || null })
        });
        const j = await res.json();
        if (res.ok) { msg.style.color = "#bfffbf"; msg.textContent = j.message || "Claim submitted!"; loadStats(); }
        else { msg.style.color = "#ff9999"; msg.textContent = j.error || "Submission failed."; }
      } catch (e) { msg.style.color = "#ff9999"; msg.textContent = "Server connection error."; }
    };

    document.getElementById("copy-ref-link").onclick = () => {
      const adr = document.getElementById("claim-address").value.trim();
      if (!isValidAddr(adr)) return alert("Enter your wallet address first.");
      const link = window.location.origin + window.location.pathname + "?ref=" + adr;
      navigator.clipboard.writeText(link).then(()=>{ msg.style.color="#bfefff"; msg.textContent="Referral link copied!"; });
    };
  </script>
</body>
</html>
